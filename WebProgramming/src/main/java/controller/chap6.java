package controller;import java.io.IOException;import java.util.GregorianCalendar;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import model.User;@WebServlet({"/api/chap6/*"})public class chap6 extends HttpServlet {  private static final long serialVersionUID = 1L;    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    String root = "/pages/";    String url = "";    String pathInfo = "";    if (request.getPathInfo() != null)      pathInfo = request.getPathInfo().split("/")[1];     if (pathInfo.equals("1")) {      GregorianCalendar currentDate = new GregorianCalendar();      int currentYear = currentDate.get(1);      request.setAttribute("currentYear", Integer.valueOf(currentYear));      String action = request.getParameter("action");      if (action == null)        action = "join";       if (action.equals("join")) {        url = "/index.jsp";      } else if (action.equals("add")) {        String message, firstName = request.getParameter("firstName");        String lastName = request.getParameter("lastName");        String email = request.getParameter("email");        User user = new User(firstName, lastName, email, "");        if (firstName == null || lastName == null || email == null || firstName.isEmpty() || lastName.isEmpty() ||           email.isEmpty()) {          message = "Please fill out all three text boxes.";          url = String.valueOf(root) + "c6e1/index.jsp";        } else {          message = null;          url = String.valueOf(root) + "c6e1/thanks.jsp";        }         request.setAttribute("user", user);        request.setAttribute("message", message);      }       getServletContext().getRequestDispatcher(url).forward((ServletRequest)request, (ServletResponse)response);    } else {      String firstName = request.getParameter("firstName");      String lastName = request.getParameter("lastName");      String email = request.getParameter("email");      String heardFrom = request.getParameter("heardFrom");      String wantsUpdates = request.getParameter("wantsUpdates");      String contactVia = request.getParameter("contactVia");      if (heardFrom == null)        heardFrom = "NA";       if (wantsUpdates == null) {        wantsUpdates = "No";      } else {        wantsUpdates = "Yes";      }       User user = new User();      user.setFirstName(firstName);      user.setLastName(lastName);      user.setEmail(email);      user.setHeardFrom(heardFrom);      user.setWantsUpdates(wantsUpdates);      user.setContactVia(contactVia);      request.setAttribute("user", user);      url = String.valueOf(root) + "c6e2/survey.jsp";      getServletContext().getRequestDispatcher(url).forward((ServletRequest)request, (ServletResponse)response);    }   }    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    doGet(request, response);  }}